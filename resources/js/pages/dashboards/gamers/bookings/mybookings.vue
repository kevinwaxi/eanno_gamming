<template>
  <div>
    <div class="row">
      <div class="col-lg-8">
        <div class="row">
          <div class="col-xl-6 mb-xl-0 mb-4">
            <div class="card bg-transparent shadow-xl">
              <div
                class="overflow-hidden position-relative border-radius-xl"
                style="
                  background-image: url('/assets/img/curved-images/curved14.jpg');
                "
              >
                <span class="mask bg-gradient-dark"></span>
                <div class="card-body position-relative z-index-1 p-3">
                  <i class="fas fa-wifi text-white p-2" aria-hidden="true"></i>
                  <h5 class="text-white mt-4 mb-5 pb-2">
                    0705&nbsp;&nbsp;&nbsp;007723
                  </h5>
                  <div class="d-flex">
                    <div class="d-flex">
                      <div class="me-4">
                        <p class="text-white text-sm opacity-8 mb-0">
                          Card Holder
                        </p>
                        <h6 class="text-white mb-0">Jack Peterson</h6>
                      </div>
                      <div>
                        <p class="text-white text-sm opacity-8 mb-0">Expires</p>
                        <h6 class="text-white mb-0">11/22</h6>
                      </div>
                    </div>
                    <div
                      class="
                        ms-auto
                        w-20
                        d-flex
                        align-items-end
                        justify-content-end
                      "
                    >
                      <img
                        class="w-60 mt-2"
                        src="/assets/img/logos/mastercard.png"
                        alt="logo"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-6">
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header mx-4 p-3 text-center">
                    <div
                      class="
                        icon icon-shape icon-lg
                        bg-gradient-primary
                        shadow
                        text-center
                        border-radius-lg
                      "
                    >
                      <i
                        class="fas fa-landmark opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                  <div class="card-body pt-0 p-3 text-center">
                    <h6 class="text-center mb-0">Salary</h6>
                    <span class="text-xs">Belong Interactive</span>
                    <hr class="horizontal dark my-3" />
                    <h5 class="mb-0">+$2000</h5>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mt-md-0 mt-4">
                <div class="card">
                  <div class="card-header mx-4 p-3 text-center">
                    <div
                      class="
                        icon icon-shape icon-lg
                        bg-gradient-primary
                        shadow
                        text-center
                        border-radius-lg
                      "
                    >
                      <i
                        class="fab fa-paypal opacity-10"
                        aria-hidden="true"
                      ></i>
                    </div>
                  </div>
                  <div class="card-body pt-0 p-3 text-center">
                    <h6 class="text-center mb-0">Paypal</h6>
                    <span class="text-xs">Freelance Payment</span>
                    <hr class="horizontal dark my-3" />
                    <h5 class="mb-0">$455.00</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 mb-lg-0 mb-4">
            <div class="card mt-4">
              <div class="card-header pb-0 p-3">
                <div class="row">
                  <div class="col-6 d-flex align-items-center">
                    <h6 class="mb-0">Payment Method</h6>
                  </div>
                  <div class="col-6 text-end">
                    <a class="btn bg-gradient-dark mb-0" href="javascript:;"
                      ><i class="fas fa-plus" aria-hidden="true"></i
                      >&nbsp;&nbsp;Add New Card</a
                    >
                  </div>
                </div>
              </div>
              <div class="card-body p-3">
                <div class="row">
                  <div class="col-md-6 mb-md-0 mb-4">
                    <div
                      class="
                        card card-body
                        border
                        card-plain
                        border-radius-lg
                        d-flex
                        align-items-center
                        flex-row
                      "
                    >
                      <img
                        class="w-10 me-3 mb-0"
                        src="/assets/img/logos/mastercard.png"
                        alt="logo"
                      />
                      <h6 class="mb-0">
                        ****&nbsp;&nbsp;&nbsp;****&nbsp;&nbsp;&nbsp;****&nbsp;&nbsp;&nbsp;7852
                      </h6>
                      <i
                        class="
                          fas
                          fa-pencil-alt
                          ms-auto
                          text-dark
                          cursor-pointer
                        "
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        title=""
                        aria-hidden="true"
                        data-bs-original-title="Edit Card"
                        aria-label="Edit Card"
                      ></i
                      ><span class="sr-only">Edit Card</span>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div
                      class="
                        card card-body
                        border
                        card-plain
                        border-radius-lg
                        d-flex
                        align-items-center
                        flex-row
                      "
                    >
                      <img
                        class="w-10 me-3 mb-0"
                        src="/assets/img/logos/visa.png"
                        alt="logo"
                      />
                      <h6 class="mb-0">
                        ****&nbsp;&nbsp;&nbsp;****&nbsp;&nbsp;&nbsp;****&nbsp;&nbsp;&nbsp;5248
                      </h6>
                      <i
                        class="
                          fas
                          fa-pencil-alt
                          ms-auto
                          text-dark
                          cursor-pointer
                        "
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        title=""
                        aria-hidden="true"
                        data-bs-original-title="Edit Card"
                        aria-label="Edit Card"
                      ></i
                      ><span class="sr-only">Edit Card</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="card h-100">
          <div class="card-header pb-0 p-3">
            <div class="row">
              <div class="col-6 d-flex align-items-center">
                <h6 class="mb-0">Your Pending Bookings</h6>
              </div>
              <div class="col-6 text-end">
                <button
                  class="btn btn-outline-primary btn-sm mb-0"
                  @click="createModal"
                >
                  Book Now
                </button>
              </div>
            </div>
          </div>
          <div class="card-body p-3 pb-0">
            <ul class="list-group">
              <li
                class="
                  list-group-item
                  border-0
                  d-flex
                  justify-content-between
                  ps-0
                  mb-2
                  border-radius-lg
                "
              >
                <div class="d-flex flex-column">
                  <h6 class="mb-1 text-dark font-weight-bold text-sm">
                    March, 01, 2020
                  </h6>
                  <span class="text-xs">#MS-415646</span>
                </div>
                <div class="d-flex align-items-center text-sm">
                  $180
                  <button class="btn btn-link text-dark text-sm mb-0 px-0 ms-4">
                    <i
                      class="fas fa-file-pdf text-lg me-1"
                      aria-hidden="true"
                    ></i>
                    PDF
                  </button>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-8">
      <div class="row mt-4">
        <div class="col-12 col-md-10">
          <div class="card">
            <div class="card-header pb-0 p-3">
              <div class="d-flex justify-content-between">
                <h6 class="mb-2">Previous Bookings</h6>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table align-items-center">
                <tbody>
                  <tr>
                    <td>
                      <div class="text-center">
                        <p class="text-xs font-weight-bold mb-0">Date:</p>
                        <h6 class="text-sm mb-0">Nov 31</h6>
                      </div>
                    </td>
                    <td>
                      <div class="text-center">
                        <p class="text-xs font-weight-bold mb-0">Station:</p>
                        <h6 class="text-sm mb-0">Station Number</h6>
                      </div>
                    </td>
                    <td>
                      <div class="text-center">
                        <p class="text-xs font-weight-bold mb-0">Time:</p>
                        <h6 class="text-sm mb-0">3Hrs</h6>
                      </div>
                    </td>
                    <td>
                      <div class="text-center">
                        <p class="text-xs font-weight-bold mb-0">Value:</p>
                        <h6 class="text-sm mb-0">Kes.600</h6>
                      </div>
                    </td>
                    <td class="align-middle text-sm">
                      <div class="col text-center">
                        <p class="text-xs font-weight-bold mb-0">Status:</p>
                        <h6 class="text-sm mb-0">Paid/Canceled</h6>
                      </div>
                    </td>
                    <td class="align-middle text-sm">
                      <div class="col text-center">
                        <p class="text-xs font-weight-bold mb-0">Actions:</p>
                        <h6 class="text-sm mb-0">Export</h6>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Booking Modal -->
    <!-- Create booking -->
    <!-- Modal -->
    <div
      class="modal fade"
      id="modal-default"
      tabindex="-1"
      role="dialog"
      aria-labelledby="modal-default"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 v-if="!editMode" class="modal-title">Booking</h5>
            <h5 v-else class="modal-title">Edit Booking</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <FormulateInput
                type="text"
                required
                label="Category Name"
                validation="required"
                v-model="form.name"
              />
            </div>
            <div class="row">
              <Label>Time</Label>
              <div class="row">
                <div class="col-6">
                  <Label>Start Time</Label>
                  <TimePicker
                    :disabled-hours="disabledHours"
                    :steps="[1, 30]"
                    confirm
                    format="HH:mm"
                    v-model="form.start_time"
                    placeholder="Select start time"
                    style="width: 168px"
                  ></TimePicker>
                </div>
                <div class="col-6">
                  <Label>End Time</Label>
                  <TimePicker
                    :disabled-hours="disabledHours"
                    :steps="[1, 30]"
                    confirm
                    v-model="form.end_time"
                    format="HH:mm"
                    placeholder="Select end time"
                    style="width: 168px"
                  ></TimePicker>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn bg-gradient-secondary"
              data-bs-dismiss="modal"
              @click="closeModal"
            >
              Close
            </button>
            <button
              v-if="editMode"
              type="button"
              class="btn bg-gradient-primary"
              @click="updateCategory(form.id)"
              :disabled="processing"
            >
              {{ processing ? 'Saving ...' : 'Save Changes' }}
            </button>
            <button
              v-else
              type="button"
              class="btn bg-gradient-primary"
              @click="createCategory()"
              :disabled="processing"
            >
              {{ processing ? 'Creating ...' : 'Create' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      disabledHours: [22, 23, 0, 1, 2, 3, 4, 5, 6, 7, 8],
      deleteModal: false,
      massDeleteModal: false,
      isDeleting: false,
      editMode: false,
      processing: false,
      deletingItem: null,
      form: {},
      bookings: {},
      total: 7,
      search: '',
      selected: '',
      checked: [],
      selectPage: false,
      selectAll: false,
      sort_direction: 'desc',
      sort_field: 'created_at',
      url: '',
    }
  },
  methods: {
    createModal() {
      $('#modal-default').modal('show')
      this.editMode = false
    },
    closeModal() {
      $('#modal-default').modal('hide')
      this.restForm()
    },
    restForm() {
      this.form.station_id = ''
      this.form.game_id = ''
      this.start_time = ''
      this.end_time = ''
    },
  },
}
</script>
